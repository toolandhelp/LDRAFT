
@{
    Layout = null;
}

<html lang="zh">

<head>
    <title>Home</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="~/Areas/Admin/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/Areas/Admin/assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/Areas/Admin/assets/vendor/linearicons/style.css">
    @*<link rel="stylesheet" href="~/Areas/Admin/assets/vendor/chartist/css/chartist-custom.css">*@
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="~/Areas/Admin/assets/css/main.css?v=1.0.0">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <!-- <link rel="stylesheet" href="~/Areas/Admin/assets/css/demo.css"> -->
    <!-- FONTS -->
    <link href="~/Areas/Admin/assets/css/css.css" rel="stylesheet">
    <!-- ICONS -->
    @*<link rel="apple-touch-icon" sizes="76x76" href="~/Areas/Admin/assets/img/apple-icon.png">
        <link rel="icon" type="image/png" sizes="96x96" href="~/Areas/Admin/assets/img/favicon.png">*@
</head>

<body>
    <!-- WRAPPER -->
    <div id="wrapper">
        <!-- NAVBAR -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="brand">
                <a urldata="/Admin/Home/Home" href="javascript:;"><img src="~/Areas/Admin/assets/img/logo-dark.png" alt="LdRaft Logo" class="img-responsive logo"></a>
            </div>
            <div class="container-fluid">
                <div class="navbar-btn">
                    <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
                </div>
                <form class="navbar-form navbar-left">
                    <div class="input-group">
                        <input type="text" value="" class="form-control" placeholder="Search dashboard...">
                        <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                    </div>
                </form>
                @*<div class="navbar-btn navbar-btn-right">
                        <a class="btn btn-success update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
                    </div>*@
                <div id="navbar-menu">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
                                <i class="lnr lnr-alarm"></i>
                                <span class="badge bg-danger">5</span>
                            </a>
                            <ul class="dropdown-menu notifications">
                                <li><a href="#" class="notification-item"><span class="dot bg-warning"></span>系统空间几乎是满的</a></li>
                                <li><a href="#" class="notification-item"><span class="dot bg-danger"></span>你有9个未完成的任务</a></li>
                                <li><a href="#" class="notification-item"><span class="dot bg-success"></span>月度报告中是可用的</a></li>
                                <li><a href="#" class="notification-item"><span class="dot bg-warning"></span>每周例会1小时</a></li>
                                <li><a href="#" class="notification-item"><span class="dot bg-success"></span>你的请求已被批准</a></li>
                                <li><a href="#" class="more">看到所有的通知</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="lnr lnr-question-circle"></i> <span>帮助</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">基本的使用</a></li>
                                <li><a href="#">处理数据</a></li>
                                <li><a href="#">安全</a></li>
                                <li><a href="#">故障排除</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="~/Areas/Admin/assets/img/user.png" class="img-circle" alt="Avatar"> <span>管理员</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="#"><i class="lnr lnr-user"></i> <span>我的资料</span></a></li>
                                <li><a href="#"><i class="lnr lnr-envelope"></i> <span>消息</span></a></li>
                                <li><a href="#"><i class="lnr lnr-cog"></i> <span>设置</span></a></li>
                                <li><a href="#"><i class="lnr lnr-exit"></i> <span>注销</span></a></li>
                            </ul>
                        </li>
                        <!-- <li>
                            <a class="update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
                        </li> -->
                    </ul>
                </div>
            </div>
        </nav>
        <!-- END NAVBAR -->
        <!-- LEFT SIDEBAR -->
        <div id="sidebar-nav" class="sidebar">
            <div class="sidebar-scroll">
                <nav id="Leftnav">
                    @*<ul class="nav">
                            <li><a href="/Admin/Home/Index" class="active"><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                            <li>
                                <a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-file-empty"></i> <span>Pages</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                                <div id="subPages" class="collapse ">
                                    <ul class="nav">
                                        <li><a href="page-profile.html" class="">Profile</a></li>
                                        <li><a href="page-login.html" class="">Login</a></li>
                                        <li><a href="page-lockscreen.html" class="">Lockscreen</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="/Admin/Home/Index" class=""><i class="lnr lnr-dice"></i> <span>Tables</span></a></li>
                            <li><a href="/Admin/Home/Index" class=""><i class="lnr lnr-text-format"></i> <span>Typography</span></a></li>
                            <li><a href="/Admin/Home/icons" class=""><i class="lnr lnr-linearicons"></i> <span>Icons</span></a></li>
                        </ul>*@
                </nav>
            </div>
        </div>
        <!-- END LEFT SIDEBAR -->
        <!-- MAIN -->
        <div class="main">
            <!-- MAIN CONTENT -->
            <iframe id="mainFrame" name="mainFrame" frameborder="0" @*src="/Admin/Home/Home"*@ @*height="50%"*@ width="100%" scrolling="no"></iframe>
            <!-- END MAIN CONTENT -->
        </div>
        <!-- END MAIN -->
        <div class="clearfix"></div>
        <footer>
            <div class="container-fluid">
                <p class="copyright">Copyright &copy; 2017 <a href="/Home/Index">www.ldraft.com</a> All rights reserved.</p>
            </div>
        </footer>
    </div>
    <!-- END WRAPPER -->
    <!-- Javascript -->
    <script src="~/Areas/Admin/assets/vendor/jquery/jquery.min.js"></script>
    <script src="~/Areas/Admin/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Areas/Admin/assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    @*<script src="~/Areas/Admin/assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>*@
    @* <script src="~/Areas/Admin/assets/vendor/chartist/js/chartist.min.js"></script>*@
    <script src="~/Areas/Admin/assets/scripts/klorofil-common.js"></script>

</body>

</html>

<script src="/Scripts/require/require/2.2.0/require.js"></script>
<script src="/Scripts/require/config/1.0.0/require.config.js?v=1.2.3"></script>

<script type="text/javascript">
    var browserVersion = window.navigator.userAgent.toUpperCase();
    var isOpera = browserVersion.indexOf("OPERA") > -1 ? true : false;
    var isFireFox = browserVersion.indexOf("FIREFOX") > -1 ? true : false;
    var isChrome = browserVersion.indexOf("CHROME") > -1 ? true : false;
    var isSafari = browserVersion.indexOf("SAFARI") > -1 ? true : false;
    var isIE = (!!window.ActiveXObject || "ActiveXObject" in window);
    var isIE9More = (! -[1,] == false);
    function reinitIframe(iframeId, minHeight) {
        try {
            var iframe = document.getElementById(iframeId);
            var bHeight = 0;
            if (isChrome == false && isSafari == false)
                bHeight = iframe.contentWindow.document.body.scrollHeight;

            var dHeight = 0;
            if (isFireFox == true)
                dHeight = iframe.contentWindow.document.documentElement.offsetHeight + 2;
            else if (isIE == false && isOpera == false)
                dHeight = iframe.contentWindow.document.documentElement.scrollHeight;
            else if (isIE == true && isIE9More) {//ie9+
                var heightDeviation = bHeight - eval("window.IE9MoreRealHeight" + iframeId);
                if (heightDeviation == 0) {
                    bHeight += 3;
                } else if (heightDeviation != 3) {
                    eval("window.IE9MoreRealHeight" + iframeId + "=" + bHeight);
                    bHeight += 3;
                }
            }
            else//ie[6-8]、OPERA
                bHeight += 3;

            var height = Math.max(bHeight, dHeight);
            if (height < minHeight) height = minHeight;
            iframe.style.height = height + "px";
        } catch (ex) { }
    }
    function startInit(iframeId, minHeight) {
        eval("window.IE9MoreRealHeight" + iframeId + "=0");
        window.setInterval("reinitIframe('" + iframeId + "'," + minHeight + ")", 100);
    }

    startInit('mainFrame', 560);
</script>

<script type="text/javascript">
    require(["jquery", "MISSY"], function () {
        $(function () {
            InitResizeWindow();
            initPage();

        });

        function initPage() {

            //点击logo
            $(".brand a").click(function () {
                var itemUrl = $(this).attr("urldata");
                $("#mainFrame").prop("src", itemUrl);
            });

            AchieveAuthMenu();
        };

        function InitResizeWindow() {
            ResizeWindowIndex();
            $(window).resize(function () { ResizeWindowIndex(); });
        }
        function ResizeWindowIndex() {
            var iwin = document.getElementById('mainFrame').contentWindow;
            var doc = iwin.document;
            $("#mainFrame").outerHeight(doc.body.scrollHeight);

        }

        //权限菜单
        function AchieveAuthMenu() {
            $.ajax({
                url: 'LeftAuthMenuNav',
                type: 'POST',
                async: false,
                data: { parent: "0" },
                dataType: "json",
                beforeSend: function () {
                    $("#Leftnav").html("<div style='width:120px;margin: 0 auto;color:#fff'> <img src= '/Images/loading.gif' width= '32px' height= '32px' align= 'absmiddle' /> 正加载...</div > ");
                },
                ContentType: "application/json;charset=utf-8",
                success: function (responseList) {
                    var temp = JSON.stringify(responseList);
                    var buf = [];
                    buf.push("<ul class=\"nav\">");
                    for (var i = 0; i < responseList.length; i++) {
                        var modelParent = responseList[i];

                        if (modelParent.Pid === "0" && modelParent.Url != "#") {
                            buf.push("<li><a href=\"javascript:;\" urldata='" + modelParent.Url + "' class=\"\"><i class='lnr " + modelParent.Target + "'></i> <span>" + modelParent.Title  + "</span></a></li>");
                        } else {

                            var childList = new Array();
                            var tempchildi = 0;
                            for (var k = 0; k < responseList.length; k++) {
                                if (responseList[k].Pid === "0") continue;
                                if (responseList[k].Pid === modelParent.Id) {
                                    childList[tempchildi] = responseList[k];
                                    tempchildi++;
                                }
                            }

                            buf.push("<li>");
                            if (modelParent.Pid === "0") {
                                buf.push("<a href=\"#subPages\" urldata='" + modelParent.Url + "' data-toggle=\"collapse\" data-e=\"erji\" class=\"collapsed\"><i class=\"lnr " + modelParent.Target + "\"></i> <span>" + modelParent.Title + "</span> <i class=\"icon-submenu lnr lnr-chevron-left\"></i></a>");
                            }
                            buf.push("<div id=\"subPages\" class=\"collapse\">");
                            buf.push(" <ul class=\"nav\">");
                            if (childList.length > 0) {
                                for (var j = 0; j < childList.length; j++) {
                                    buf.push("<li><a hrer=\"javascript:;\"  urldata=" + childList[j].Url + " class=\"\">" + childList[j].Title + "</a></li>");
                                }
                            }
                            buf.push("</ul>");
                            buf.push("</div>");
                            buf.push("</li>");
                        }
                    }

                    buf.push("</ul>");

                    $("#Leftnav").html(buf.join(""));

                    $("#Leftnav ul li:eq(0)").remove();

                    $(".nav li a").click(function () {
                        //if ($(this).hasClass('collapsed')) {
                        //   // $(".nav li a").removeClass("collapsed");
                        //    $(this).addClass("active");
                           
                        //}
                        if ($(this).attr("data-toggle"))
                        {
                            
                        }
                        else {
                            $(".nav li a").removeClass("active");
                            $(this).addClass("active");
                            var itemUrl = $(this).attr("urldata");
                            $("#mainFrame").prop("src", itemUrl);
                        }
                    })
                    var il = $(".sidebar a:eq(0)").addClass("active");
                    $("#mainFrame").prop("src", "/Admin/Home/Home?_r=" + Math.random());
                  
                   // $(".nav li:eq(0) a").addClass("active");
                    ResizeWindowIndex();
                },
                error: function (xmlHttpRequest, textStatus, errorThrown) {
                    MISSY.iDebugAjaxError(xmlHttpRequest, textStatus, errorThrown);
                    $("#Leftnav").html("数据加载失败,请稍后再试.");
                }
            });
        }

    });
</script>

