
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>

    <meta charset="utf-8">

    <title>联系我们</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="">

    <meta name="author" content="">

    <!-- Le styles -->

    <link href="~/Content/bootstrap.css?_v=1.1.1" rel="stylesheet">

    <link href="~/Content/style.css?_v=1.1.1" rel="stylesheet">

    <link href="~/Content/icons.css?_v=1.1.1" rel="stylesheet">

    <link href="~/Content/bootstrap-responsive.css?_v=1.1.1" rel="stylesheet">

    <link rel="stylesheet" id="main-color" href="~/Content/skin-orange.css?_v=1.1.1" media="screen" />

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>

      <script src="~/js/html5shiv.js"></script>

    <![endif]-->
</head>

<body class="boxed">



    <div class="container">

        <div class="page-header">

            <h2>取得联系</h2>

            <div class="headerdivider">

            </div>

        </div>

        <div class="row-fluid top30">

            <div class="span6">

                <form action="#" name="MYFORM" id="MYFORM">

                    <input name="name" size="30" type="text" id="name" class="span12" maxlength="50" placeholder="姓名">

                    <input name="email" size="30" type="text" id="email" class="span12" maxlength="25" placeholder="邮箱地址">

                    <textarea style="resize:none" id="message" name="message" class="span12" placeholder="信息" maxlength="250" rows="8"></textarea>

                    <input name="code" type="text" id="code" placeholder="输入验证码" maxlength="4" class="top10">
                    <img src="~/img/refresh.jpg" width="25" alt="刷新" title="刷新" id="refresh" />
                    <img src="~/ContactUs/CodeImg" alt="" id="captcha" />

                    <br />

                    <input value="发送" type="submit" id="Send" class="btn btn-primary top10">

                    <!--<label class="alert alert-success success" id="after_submit_success" style="display:none;"><button type="button" class="close" data-dismiss="alert">×</button>谢谢你!你的信息已经发送了.</label>

                    <label class="alert alert-error" id="after_submit_error" style="display:none;"><button type="button" class="close" data-dismiss="alert">×</button>验证码错误!点击<a harf="javascript:;" onclick="change_captcha();" id="refresh">刷新</a>,再试一次.</label>-->

                </form>

            </div>

            <div class="span6">

                <div class="box3">



                    @*<img  class="gmap" src="http://api.map.baidu.com/staticimage?center=121.332341%2C31.18407&zoom=10&width=500&height=240&markers=121.332341%2C31.18407&markerStyles=l%2CA" alt="" />*@
                    <iframe src="http://kindeditor.net/ke4/plugins/baidumap/index.html?center=121.473704%2C31.230393&zoom=11&width=440&height=240&markers=12.473704%2C31.230393&markerStyles=l%2CA"></iframe>
                    @*<iframe src="http://localhost:63632/kindeditor/plugins/baidumap/index.html?center=112.92916%2C28.244881&zoom=15&width=558&height=360&markers=112.92916%2C28.244881&markerStyles=l%2CA" frameborder="0" style="width:560px;height:362px;"></iframe>*@
                   @* <iframe class="gmap" style="width:98.2%;height:240px;" src="~/UploadPic/map.png"></iframe>*@

                    <i class="icon-map-marker"></i> &nbsp;&nbsp;
                    <i>&nbsp;地&emsp;&emsp;址&nbsp;</i>: @ViewBag.Adderss

                    <p>

                    </p>

                    <i class="icon-reorder"></i> &nbsp;
                    <i>工作时间</i>&nbsp;: @ViewBag.WorkTime

                    <p>

                    </p>

                    <i class="icon-envelope"></i> &nbsp;
                    <i>&nbsp;邮&emsp;&emsp;箱&nbsp;</i>: &nbsp;
                    <a href="mailto:@ViewBag.Email">@ViewBag.Email</a>

                    <p>

                    </p>

                </div>

            </div>

        </div>

    </div>


    <!-- /.body -->
    <!-- Le javascript

    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="~/js/jquery.js"></script>

    <script src="~/js/bootstrap.js"></script>

    <script src="~/js/plugins.js"></script>

    <!--只需要在ifame外面调用即可-->
    <!--<script src="~/js/custom.js"></script>-->

    <!-- CALL CONTACT FORM -->

    <script type="text/javascript">

        $(document).ready(function () {

            //没用
            var HtmlUtil = {
                /*1.用浏览器内部转换器实现html转码*/
                htmlEncode: function (html) {
                    //1.首先动态创建一个容器标签元素，如DIV
                    var temp = document.createElement("div");
                    //2.然后将要转换的字符串设置为这个元素的innerText(ie支持)或者textContent(火狐，google支持)
                    (temp.textContent != undefined) ? (temp.textContent = html) : (temp.innerText = html);
                    //3.最后返回这个元素的innerHTML，即得到经过HTML编码转换的字符串了
                    var output = temp.innerHTML;
                    temp = null;
                    return output;
                },
                /*2.用浏览器内部转换器实现html解码*/
                htmlDecode: function (text) {
                    //1.首先动态创建一个容器标签元素，如DIV
                    var temp = document.createElement("div");
                    //2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)
                    temp.innerHTML = text;
                    //3.最后返回这个元素的innerText(ie支持)或者textContent(火狐，google支持)，即得到经过HTML解码的字符串了。
                    var output = temp.innerText || temp.textContent;
                    temp = null;
                    return output;
                },
                /*3.用正则表达式实现html转码*/
                htmlEncodeByRegExp: function (str) {
                    var s = "";
                    if (str.length == 0) return "";
                    s = str.replace(/&/g, "&amp;");
                    s = s.replace(/</g, "&lt;");
                    s = s.replace(/>/g, "&gt;");
                    s = s.replace(/ /g, "&nbsp;");
                    s = s.replace(/\'/g, "&#39;");
                    s = s.replace(/\"/g, "&quot;");
                    return s;
                },
                /*4.用正则表达式实现html解码*/
                htmlDecodeByRegExp: function (str) {
                    var s = "";
                    if (str.length == 0) return "";
                    s = str.replace(/&amp;/g, "&");
                    s = s.replace(/&lt;/g, "<");
                    s = s.replace(/&gt;/g, ">");
                    s = s.replace(/&nbsp;/g, " ");
                    s = s.replace(/&#39;/g, "\'");
                    s = s.replace(/&quot;/g, "\"");
                    return s;
                }
            };



            $('#Send').click(function () {

                // name validation

                var nameVal = $("#name").val();

                if (nameVal == '') {

                    $("#name_error").html('');

                    $("#name").after('<label class="error" id="name_error">请输入你的名字.</label>');

                    return false

                }

                else {

                    $("#name_error").html('');

                }

                /// email validation

                var emailReg = /^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/;

                var emailaddressVal = $("#email").val();

                if (emailaddressVal == '') {

                    $("#email_error").html('');

                    $("#email").after('<label class="error" id="email_error">请输入您的电子邮件地址.</label>');

                    return false

                }

                else if (!emailReg.test(emailaddressVal)) {

                    $("#email_error").html('');

                    $("#email").after('<label class="error" id="email_error">输入一个有效的电子邮件地址.</label>');

                    return false

                }

                else {

                    $("#email_error").html('');

                }

                // message validation

                var nameVal = $("#message").val();

                if (nameVal == '') {

                    $("#message_error").html('');

                    $("#message").after('<label class="error" id="name_error">请输入你的信息.</label>');

                    return false

                }

                else {

                    $("#message_error").html('');

                }

                // code validation

                var codeVal = $("#code").val();

                if (codeVal == '') {

                    $("#code_error").html('');

                    $("#captcha").after('<label class="error" id="code_error">请输入验证码.</label>');

                    return false

                }

                else {

                    $("#code_error").html('');

                }


                $.post("MassPost?" + $("#MYFORM").serialize(), {

                }, function (response) {

                    if (response.ErrorType == 2)
                    {
                        $("#code_error").remove();

                        $("#after_submit").remove();

                        $("#Send").after('<div class="alert alert-warning warning" id="after_submit"><button type="button" class="close" data-dismiss="alert">×</button>' + response.MessageContent + '</div>');

                        return;
                    }

                    if (response.ErrorType == 1) {

                        //$("#after_submit_success").show();
                        //$("#after_submit_error").hide();

                        $("#code_error").remove();

                        $("#after_submit").remove();

                        $("#Send").after('<div class="alert alert-success success" id="after_submit"><button type="button" class="close" data-dismiss="alert">×</button>' + response.MessageContent + '</div>');

                        change_captcha();

                        clear_form();

                        return;

                    }

                    else {

                        //$("#after_submit_success").hide();
                        //$("#after_submit_error").show();

                        $("#code_error").remove();

                        $("#after_submit").remove();

                        $("#Send").after('<label class="alert alert-error" id="after_submit"><button type="button" class="close" data-dismiss="alert">×</button>验证码错误!点击<a harf="javascript:;" id="refresh">刷新</a>,再试一次.</label>');

                    }

                });

                return false;

            });

            // refresh captcha

            $('img#refresh').click(function () {
                $("#after_submit").remove();
                change_captcha();

            });

            $("#refresh").on("click", function () {
                change_captcha();

            });

            function change_captcha() {

                document.getElementById('captcha').src = "/ContactUs/CodeImg?_r=" + Math.random();
                document.getElementById('code').value = '';

            }

            function clear_form() {

                $("#name").val('');

                $("#email").val('');

                $("#message").val('');

                $("#code").val('');

            }

            initWindow();
        });


        function initWindow() {
            InitFrameSize();
            $(window).resize(function () {
                InitFrameSize();
            });
        }

        function InitFrameSize() {
            var contentHeight = $(document).find("body").height();
            var frame = $("#main", window.parent.document);
            var initHeight = parseInt(!isNaN(frame.attr("init_height")) ? frame.attr("init_height") : "0");
            frame.height(initHeight > contentHeight ? initHeight : contentHeight + 10);
        }
    </script>
    <!--BEGIN DEMO PANEL-->

</body>

</html>


